## 版本支持

系统支持：根据监控目标支持对象进行支持

版本支持：根据监控目标支持对象进行支持

## 插件功能

采集器将会根据提供的监听地址以及数据库账号密码对被监控主机上存在的对应服务进行检索获取对应的实例，之后定期在本地执行 sql查询语句查取对应的监控数据

## 使用指引

根据对应被监控对象的权限要求提供获取权限的方法

#### 样例：

根据微软指引创建mssql服务实例，之后对对应需求参数进行填写即可运行

进行操作时需要提供mssql的帐号密码，如果权限不足可以申请对应需求的表的权限，操作如下：

```mssql
# 0. 创建用户
use master
EXEC sp_addlogin 'username', '1qaz@WSX', 'master'
# 1. 授予username看到所有数据库的权限
USE [master]
GO
GRANT VIEW ANY DATABASE TO [username]
# 2. 授予username对所有数据库的public访问权限
EXEC sp_MSforeachdb 'use[*] CREATE USER [username] FOR LOGIN [username]',@replacechar = '*'
# 3. 授予username查看实例状态权限
USE [master]
GO
GRANT VIEW SERVER STATE TO [username]
# 4. 授予ovuser查看所有定义权限
USE [master]
GO
GRANT VIEW ANY DEFINITION TO [username]
GO
# 5.授予username查看作业状态权限
use master
GRANT select ON sys.dm_hadr_availability_group_states to username
GRANT select ON sys.dm_os_sys_memory to username
GRANT select ON sys.dm_os_performance_counters to username
GRANT select ON sysperfinfo to username
```



## 参数介绍

| 参数名             | 含义                                | 是否必填 | 使用举例       |
| ------------------ | ----------------------------------- | -------- | -------------- |
| web.listen-address | exporter监听的url，提供给采集器使用 | 否       | 127.0.0.1:9601 |
| web.telemetry-path | exporter采集到的数据显示路径        | 否       | /metrics       |
| host               | exporter监控对象的host              | 是       | 127.0.0.1      |
| port               | exporter监控对象的端口port          | 是       | 9601           |
| user               | 采集目标的用户名,默认为空           | 是       | root           |
| password           | 采集目标认证密码，默认为空          | 是       | 123456         |
| logLevel           | 采集目标的日志等级，默认为error     | 否       | info           |
